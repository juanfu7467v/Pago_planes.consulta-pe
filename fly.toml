# El nombre de tu aplicaciÃ³n en Fly.io (usado en el comando)
app = "pago-planes-consulta-pe"
kill_signal = "SIGINT"
kill_timeout = 5
primary_region = "iad" # Usando 'iad' (regiÃ³n default) o puedes cambiar a 'lim' si es tu principal

# ðŸ›‘ IMPORTANTE: La secciÃ³n [build] se ELIMINA COMPLETAMENTE.
# Esto fuerza a Fly.io a usar el Dockerfile que creaste, evitando el Buildpack obsoleto.

[env]
  PORT = "8080" # El puerto que usa express en index.js

[[services]]
  http_checks = []
  internal_port = 8080
  protocol = "tcp"
  script_checks = []
  
  [[services.ports]]
    force_https = true
    handlers = ["http"]
    port = 80
    
  [[services.ports]]
    handlers = ["tls", "http"]
    port = 443
    
  [[services.handles]]
    graceful_shutdown = 5000
    metrics_path = "/metrics"
    open_conn_timeout = 2000
    
  [[services.tcp_checks]]
    interval = "15s"
    timeout = "2s"
